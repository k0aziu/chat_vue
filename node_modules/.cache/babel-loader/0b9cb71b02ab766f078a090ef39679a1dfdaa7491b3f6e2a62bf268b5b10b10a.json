{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import io from 'socket.io-client';\n\nexport default {\n  name: 'MainChat',\n  data() {\n    return {\n      bottom: '',\n      // message: '',\n      connection: null,\n      messages: [\n        // { id: 0, name: 'kaziu', message: 'coś' },\n        // { id: 1, name: 'kaziu', message: 'coś innego' },\n        // { id: 2, name: 'mizet', message: 'ej mizcom jest przecież lepszy!' },\n        // { id: 3, name: 'kaziu', message: 'wcale nie!' }\n      ]\n    };\n  },\n  methods: {\n    scrollBottom() {\n      this.bottom = document.body.scrollHeight;\n      window.scrollTo(0, this.bottom);\n    }\n    // sendMessage: (message) => {\n    //   console.log(this.connection)\n    //   this.connection.send(message)\n    // }\n  },\n\n  created() {\n    axios.post('/chat_history', {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      const obj = JSON.parse(response.config.data);\n      obj.forEach(element => {\n        this.messages.push(element);\n      });\n    });\n\n    // this.connection = new WebSocket(\"wss://echo.websocket.org\")\n    // this.connection.onopen = (e) => {\n    // console.log(e)\n    // }\n    // this.connection.onmessage = (e) => {\n    // console.log(e)\n    // }\n  }\n};","map":{"version":3,"names":["name","data","bottom","connection","messages","methods","scrollBottom","document","body","scrollHeight","window","scrollTo","created","axios","post","headers","then","response","obj","JSON","parse","config","forEach","element","push"],"sources":["C:\\Users\\micha\\Desktop\\kazcom\\src\\components\\MainChat.vue"],"sourcesContent":["<template>\r\n    <v-container>\r\n      <v-row :scroll-target=\"onScroll\" style=\"margin-bottom: 20px;\">\r\n        <v-card @click=\"scrollBottom\" v-for=\"message in messages\" :key=\"message.id\" :title=\"message.name\" variant=\"tonal\"\r\n          :text=\"message.message\" style=\"width: 100%; margin: 10px 10px 10px 10px;\"></v-card>\r\n      </v-row>\r\n      <v-text-field label=\"Label\" :append-icon=\"message ? 'mdi-send' : 'mdi-emoticon'\" @click:append=\"scrollBottom\" variant=\"solo\" v-model=\"message\"></v-text-field>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\n// import io from 'socket.io-client';\r\n\r\nexport default {\r\n  name: 'MainChat',\r\n    data() {\r\n      return {\r\n        bottom: '',\r\n        // message: '',\r\n        connection: null,\r\n        messages: [\r\n          // { id: 0, name: 'kaziu', message: 'coś' },\r\n          // { id: 1, name: 'kaziu', message: 'coś innego' },\r\n          // { id: 2, name: 'mizet', message: 'ej mizcom jest przecież lepszy!' },\r\n          // { id: 3, name: 'kaziu', message: 'wcale nie!' }\r\n        ]\r\n      }\r\n    },methods: {\r\n  scrollBottom() {\r\n    this.bottom = document.body.scrollHeight\r\n    window.scrollTo(0, this.bottom);\r\n  },\r\n  // sendMessage: (message) => {\r\n  //   console.log(this.connection)\r\n  //   this.connection.send(message)\r\n  // }\r\n},\r\ncreated() {\r\n  axios.post('/chat_history', {\r\n      headers: { 'Content-Type': 'application/json' }\r\n  })\r\n  .then(response => {\r\n    const obj = JSON.parse(response.config.data)\r\n    obj.forEach(element => {\r\n      this.messages.push(element)\r\n    });      \r\n\r\n    })\r\n\r\n  // this.connection = new WebSocket(\"wss://echo.websocket.org\")\r\n  // this.connection.onopen = (e) => {\r\n    // console.log(e)\r\n  // }\r\n  // this.connection.onmessage = (e) => {\r\n    // console.log(e)\r\n  // }\r\n}\r\n}\r\n</script>"],"mappings":";AAWA;;AAEA,eAAe;EACbA,IAAI,EAAE,UAAU;EACdC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACV;MACAC,UAAU,EAAE,IAAI;MAChBC,QAAQ,EAAE;QACR;QACA;QACA;QACA;MAAA;IAEJ;EACF,CAAC;EAACC,OAAO,EAAE;IACbC,YAAYA,CAAA,EAAG;MACb,IAAI,CAACJ,MAAK,GAAIK,QAAQ,CAACC,IAAI,CAACC,YAAW;MACvCC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAACT,MAAM,CAAC;IACjC;IACA;IACA;IACA;IACA;EACF,CAAC;;EACDU,OAAOA,CAAA,EAAG;IACRC,KAAK,CAACC,IAAI,CAAC,eAAe,EAAE;MACxBC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB;IAClD,CAAC,EACAC,IAAI,CAACC,QAAO,IAAK;MAChB,MAAMC,GAAE,GAAIC,IAAI,CAACC,KAAK,CAACH,QAAQ,CAACI,MAAM,CAACpB,IAAI;MAC3CiB,GAAG,CAACI,OAAO,CAACC,OAAM,IAAK;QACrB,IAAI,CAACnB,QAAQ,CAACoB,IAAI,CAACD,OAAO;MAC5B,CAAC,CAAC;IAEF,CAAC;;IAEH;IACA;IACE;IACF;IACA;IACE;IACF;EACF;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}