{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport io from 'socket.io-client';\nexport default {\n  name: 'MainChat',\n  data() {\n    return {\n      bottom: '',\n      message: '',\n      connection: null,\n      socket: io.connect(),\n      messages: []\n    };\n  },\n  methods: {\n    scrollBottom() {\n      this.bottom = document.body.scrollHeight;\n      window.scrollTo(0, this.bottom);\n    },\n    sendMessage() {\n      this.socket.emit('sendMessage', {\n        message: this.message,\n        name: localStorage.getItem('user_name')\n      });\n      this.resetIcon();\n      this.clearMessage();\n    },\n    clearMessage() {\n      this.message = '';\n    },\n    resetIcon() {\n      this.iconIndex = 0;\n    },\n    changeIcon() {\n      this.iconIndex === this.icons.length - 1 ? this.iconIndex = 0 : this.iconIndex++;\n    }\n  },\n  created() {\n    this.socket.on('getMessage', function (data) {\n      this.messages.push(data);\n      console.log(data);\n      console.log(this.messages);\n      this.scrollBottom();\n    });\n  }\n};","map":{"version":3,"names":["io","name","data","bottom","message","connection","socket","connect","messages","methods","scrollBottom","document","body","scrollHeight","window","scrollTo","sendMessage","emit","localStorage","getItem","resetIcon","clearMessage","iconIndex","changeIcon","icons","length","created","on","push","console","log"],"sources":["C:\\Users\\micha\\Desktop\\kazcom\\src\\components\\MainChat.vue"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-row :scroll-target=\"onScroll\" style=\"margin-bottom: 20px;\">\r\n      <v-card @click=\"scrollBottom\" v-for=\"message in messages\" :key=\"message.id\" :title=\"message.name\" variant=\"tonal\"\r\n        :text=\"message.message\" style=\"width: 100%; margin: 10px 10px 10px 10px;\"></v-card>\r\n    </v-row>\r\n    <v-text-field label=\"Wiadomość...\" v-model=\"message\" :append-icon=\"message ? 'mdi-send' : 'mdi-emoticon'\"\r\n      variant=\"filled\" clear-icon=\"mdi-close-circle\" clearable type=\"text\" @click:append=\"message ? showEmoticons : sendMessage\"\r\n      @click:prepend=\"changeIcon\" @click:clear=\"clearMessage\"></v-text-field>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport io from 'socket.io-client';\r\n\r\nexport default {\r\n  name: 'MainChat',\r\n  data() {\r\n    return {\r\n      bottom: '',\r\n      message: '',\r\n      connection: null,\r\n      socket: io.connect(),\r\n      messages: []\r\n    }\r\n  }, methods: {\r\n    scrollBottom() {\r\n      this.bottom = document.body.scrollHeight\r\n      window.scrollTo(0, this.bottom);\r\n    },\r\n    sendMessage() {\r\n      this.socket.emit('sendMessage', { message: this.message, name: localStorage.getItem('user_name') });\r\n      this.resetIcon()\r\n      this.clearMessage()\r\n    },\r\n    clearMessage() {\r\n      this.message = ''\r\n    },\r\n    resetIcon() {\r\n      this.iconIndex = 0\r\n    },\r\n    changeIcon() {\r\n      this.iconIndex === this.icons.length - 1 ? this.iconIndex = 0 : this.iconIndex++\r\n    },\r\n  },\r\n  created() {\r\n    this.socket.on('getMessage', function (data) {\r\n      this.messages.push(data)\r\n      console.log(data)\r\n      console.log(this.messages)\r\n      this.scrollBottom()\r\n    }\r\n    )\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<!-- TODO\r\n\r\nshowEmoticons\r\n\r\n-->"],"mappings":";AAaA,OAAOA,EAAC,MAAO,kBAAkB;AAEjC,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,OAAO,EAAE,EAAE;MACXC,UAAU,EAAE,IAAI;MAChBC,MAAM,EAAEN,EAAE,CAACO,OAAO,EAAE;MACpBC,QAAQ,EAAE;IACZ;EACF,CAAC;EAAEC,OAAO,EAAE;IACVC,YAAYA,CAAA,EAAG;MACb,IAAI,CAACP,MAAK,GAAIQ,QAAQ,CAACC,IAAI,CAACC,YAAW;MACvCC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAACZ,MAAM,CAAC;IACjC,CAAC;IACDa,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACV,MAAM,CAACW,IAAI,CAAC,aAAa,EAAE;QAAEb,OAAO,EAAE,IAAI,CAACA,OAAO;QAAEH,IAAI,EAAEiB,YAAY,CAACC,OAAO,CAAC,WAAW;MAAE,CAAC,CAAC;MACnG,IAAI,CAACC,SAAS,EAAC;MACf,IAAI,CAACC,YAAY,EAAC;IACpB,CAAC;IACDA,YAAYA,CAAA,EAAG;MACb,IAAI,CAACjB,OAAM,GAAI,EAAC;IAClB,CAAC;IACDgB,SAASA,CAAA,EAAG;MACV,IAAI,CAACE,SAAQ,GAAI;IACnB,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACD,SAAQ,KAAM,IAAI,CAACE,KAAK,CAACC,MAAK,GAAI,IAAI,IAAI,CAACH,SAAQ,GAAI,IAAI,IAAI,CAACA,SAAS,EAAC;IACjF;EACF,CAAC;EACDI,OAAOA,CAAA,EAAG;IACR,IAAI,CAACpB,MAAM,CAACqB,EAAE,CAAC,YAAY,EAAE,UAAUzB,IAAI,EAAE;MAC3C,IAAI,CAACM,QAAQ,CAACoB,IAAI,CAAC1B,IAAI;MACvB2B,OAAO,CAACC,GAAG,CAAC5B,IAAI;MAChB2B,OAAO,CAACC,GAAG,CAAC,IAAI,CAACtB,QAAQ;MACzB,IAAI,CAACE,YAAY,EAAC;IACpB,EACA;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}