{"ast":null,"code":"import axios from 'axios';\nimport bcrypt from 'bcryptjs';\nexport default {\n  name: 'ShowLogin',\n  data() {\n    return {\n      reg: false,\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      nameRules: [v => !!v || \"Username is required\", v => /^[a-zA-Z]{3,15}$/i.test(v) || \"Username length must be correct\"],\n      emailRules: [v => !!v || \"Email is required\", v => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/i.test(v) || \"Email must be correct\"],\n      passwordRules: [v => !!v || \"Password is required\", v => /^[a-zA-Z]{8,100}$/i.test(v) || \"Password length must be correct\"]\n    };\n  },\n  methods: {\n    login() {\n      axios.post('/login_user', {\n        email: this.email,\n        password: bcrypt.hashSync(this.password, 10)\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        cosnole.log(response.config.data);\n        console.log(obj.name);\n        const obj = JSON.parse(response.config.data);\n        localStorage.setItem(\"user_name\", obj.name);\n        localStorage.setItem(\"user_email\", obj.email);\n        localStorage.setItem(\"user_password\", obj.password);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    register() {\n      axios.post('/add_user', {\n        name: this.username,\n        email: this.email,\n        password: bcrypt.hashSync(this.password, 10)\n      }, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        const obj = JSON.parse(response.config.data);\n        localStorage.setItem(\"user_name\", obj.name);\n        localStorage.setItem(\"user_email\", obj.email);\n        localStorage.setItem(\"user_password\", obj.password);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  },\n  computed: {\n    valid() {\n      return !!this.password && !!this.email && (this.reg ? !!this.username : true);\n    }\n  }\n};","map":{"version":3,"names":["axios","bcrypt","name","data","reg","username","email","password","nameRules","v","test","emailRules","passwordRules","methods","login","post","hashSync","headers","then","response","cosnole","log","config","console","obj","JSON","parse","localStorage","setItem","catch","error","register","computed","valid"],"sources":["C:\\Users\\micha\\Desktop\\kazcom\\src\\components\\ShowLogin.vue"],"sourcesContent":["<template>\n    <v-main justify=\"center\">\n        <v-container fluid fill-height justify=\"center\">\n            <v-row justify=\"center\" class=\"mt-10\">\n                <v-col cols=\"12\" md=\"4\" justify=\"center\">\n                    <v-card class=\"elevation-12\" justify=\"center\">\n                        <v-toolbar dark color=\"primary\">\n                            <v-toolbar-title class=\"text-h5\"> {{ !this.reg ? 'Login' : 'Register' }} </v-toolbar-title>\n                        </v-toolbar>\n                        <v-card-text>\n                            <v-form @submit.prevent=\"login\">\n                                <v-text-field v-if=\"reg\" label=\"Username\" v-model=\"username\" type=\"text\" :rules=\"nameRules\"\n                                    required></v-text-field>\n                                <v-text-field label=\"Email\" v-model=\"email\" type=\"email\" :rules=\"emailRules\"\n                                    required></v-text-field>\n                                <v-text-field label=\"HasÅ‚o\" v-model=\"password\" type=\"password\" :rules=\"passwordRules\"\n                                    required></v-text-field>\n                            </v-form>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-btn color=\"primary\" to=\"/\">Home</v-btn>\n                            <v-spacer></v-spacer>\n                            <v-btn color=\"primary\" @click=\"() => { this.reg = !this.reg }\"> {{ this.reg ? 'Login' :\n                                'Register'\n                            }} </v-btn>\n                            <v-spacer></v-spacer>\n                            <v-btn color=\"primary\" :disabled=\"!valid\" @click=\"() => { !this.reg ? login() : register() }\">Next</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-col>\n            </v-row>\n        </v-container>\n    </v-main>\n</template>\n\n<script>\nimport axios from 'axios'\nimport bcrypt from 'bcryptjs'\n\nexport default {\n    name: 'ShowLogin',\n    data() {\n        return {\n            reg: false,\n            username: \"\",\n            email: \"\",\n            password: \"\",\n            nameRules: [\n                (v) => !!v || \"Username is required\",\n                (v) => /^[a-zA-Z]{3,15}$/i.test(v) || \"Username length must be correct\",\n            ],\n            emailRules: [\n                (v) => !!v || \"Email is required\",\n                (v) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/i.test(v) || \"Email must be correct\"\n            ],\n            passwordRules: [\n                (v) => !!v || \"Password is required\",\n                (v) => /^[a-zA-Z]{8,100}$/i.test(v) || \"Password length must be correct\",\n            ],\n        };\n    },\n    methods: {\n        login() {\n            axios.post('/login_user', { email: this.email, password: bcrypt.hashSync(this.password, 10) }, {\n                headers: { 'Content-Type': 'application/json' }\n            })\n                .then(response => {\n                    cosnole.log(response.config.data)\n                    console.log(obj.name);\n                    const obj = JSON.parse(response.config.data)\n                    localStorage.setItem(\"user_name\", obj.name)\n                    localStorage.setItem(\"user_email\", obj.email)\n                    localStorage.setItem(\"user_password\", obj.password)\n                })\n                .catch(error => {\n                    console.log(error);\n                });\n        },\n        register() {\n            axios.post('/add_user', { name: this.username, email: this.email, password: bcrypt.hashSync(this.password, 10) }, {\n                headers: { 'Content-Type': 'application/json' }\n            })\n                .then(response => {\n                    const obj = JSON.parse(response.config.data)\n                    localStorage.setItem(\"user_name\", obj.name)\n                    localStorage.setItem(\"user_email\", obj.email)\n                    localStorage.setItem(\"user_password\", obj.password)\n                })\n                .catch(error => {\n                    console.log(error);\n                });\n        },\n    },\n    computed: {\n        valid() {\n            return !!this.password && !!this.email && (this.reg ? !!this.username : true)\n        }\n    },\n};\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}